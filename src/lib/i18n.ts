import { getRequestConfig } from "next-intl/server"

export default getRequestConfig(async ({ requestLocale }) => {
  // Await and validate locale
  const locale = await requestLocale

  // Default to 'sq' if locale is invalid or undefined
  const validLocale = locale && ["sq", "en"].includes(locale) ? locale : "sq"

  // Load all translation files individually
  // This allows for better code splitting and maintainability
  const [
    navigation,
    cta,

    about,
    contact,
    footer,
    home,
    dashboard,
    auth,
    sidebar,
    help,
    marketplace,
    marketplaceLanding,
    listing,
    common,
    admin,
    errors,
    metadata,
    profile,
    marketplaceV2,
    myOrganization,
    myWorkspace,
    adminWorkspace,
    ecoOrganizations,
    partners,
    howItWorks,
    myOrganizationProfile,
    adminUsers,
    DashboardV2,
    myProfile,
    faq,
    adminProfile,
  ] = await Promise.all([
    import(`../../messages/${validLocale}/navigation.json`),
    import(`../../messages/${validLocale}/cta.json`),

    import(`../../messages/${validLocale}/about.json`),
    import(`../../messages/${validLocale}/contact.json`),
    import(`../../messages/${validLocale}/footer.json`),
    import(`../../messages/${validLocale}/home.json`),
    import(`../../messages/${validLocale}/dashboard.json`),
    import(`../../messages/${validLocale}/auth.json`),
    import(`../../messages/${validLocale}/sidebar.json`),
    import(`../../messages/${validLocale}/help.json`),
    import(`../../messages/${validLocale}/marketplace.json`),
    import(`../../messages/${validLocale}/marketplace-landing.json`),
    import(`../../messages/${validLocale}/listing.json`),
    import(`../../messages/${validLocale}/common.json`),
    import(`../../messages/${validLocale}/admin.json`),
    import(`../../messages/${validLocale}/errors.json`),
    import(`../../messages/${validLocale}/metadata.json`),
    import(`../../messages/${validLocale}/profile.json`),
    import(`../../messages/${validLocale}/marketplace-v2.json`),
    import(`../../messages/${validLocale}/my-organization.json`),
    import(`../../messages/${validLocale}/my-workspace.json`),
    import(`../../messages/${validLocale}/admin-workspace.json`),
    import(`../../messages/${validLocale}/eco-organizations.json`),
    import(`../../messages/${validLocale}/partners.json`),
    import(`../../messages/${validLocale}/how-it-works.json`),
    import(`../../messages/${validLocale}/my-organization-profile.json`),
    import(`../../messages/${validLocale}/admin-users.json`),
    import(`../../messages/${validLocale}/DashboardV2.json`),
    import(`../../messages/${validLocale}/my-profile.json`),
    import(`../../messages/${validLocale}/faq.json`),
    import(`../../messages/${validLocale}/admin-profile.json`),
  ])

  return {
    locale: validLocale,
    messages: {
      navigation: navigation.default,
      cta: cta.default,

      about: about.default,
      contact: contact.default,
      footer: footer.default,
      home: home.default,
      dashboard: dashboard.default,
      auth: auth.default,
      sidebar: sidebar.default,
      help: help.default,
      marketplace: marketplace.default,
      "marketplace-landing": marketplaceLanding.default,
      listing: listing.default,
      common: common.default,
      admin: admin.default,
      errors: errors.default,
      metadata: metadata.default,
      profile: profile.default,
      "marketplace-v2": marketplaceV2.default,
      "my-organization": myOrganization.default,
      "my-workspace": myWorkspace.default,
      "admin-workspace": adminWorkspace.default,
      "eco-organizations": ecoOrganizations.default,
      partners: partners.default,
      "how-it-works": howItWorks.default,
      "my-organization-profile": myOrganizationProfile.default,
      "admin-users": adminUsers.default,
      DashboardV2: DashboardV2.default,
      "my-profile": myProfile.default,
      faq: faq.default,
      "admin-profile": adminProfile.default,
    },
  }
})
